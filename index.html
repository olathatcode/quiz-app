<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizMaster Pro - Interactive Quiz Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-content">
            <div class="preloader-brain"></div>
            <h1 class="preloader-title">QuizMaster Pro</h1>
            <p class="preloader-subtitle">Loading your quiz experience...</p>
            <div class="preloader-spinner"></div>
            <div class="preloader-dots">
                <div class="preloader-dot"></div>
                <div class="preloader-dot"></div>
                <div class="preloader-dot"></div>
            </div>
        </div>
    </div>

    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="quiz-container" id="main-content">
        <div class="quiz-header">
            <h1 class="quiz-title">
                <i class="fas fa-brain"></i> QuizMaster Pro
            </h1>
            <p class="quiz-subtitle">Test your knowledge with our interactive quiz platform</p>
        </div>

        <div class="progress-container" id="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span id="current-question">Question 1</span>
                <span id="total-questions">of 1</span>
            </div>
        </div>

        <div class="question-container" id="question-container" role="main" aria-live="polite">
            <div class="question-card">
                <h2 class="question-text" id="question" aria-label="Quiz question">Loading question...</h2>
                <fieldset class="options-container" id="options-container" aria-labelledby="question">
                    <legend class="sr-only">Choose your answer</legend>
                    <!-- Options will be loaded here -->
                </fieldset>
            </div>
            <button class="submit-btn" id="submit-btn" disabled aria-describedby="submit-help">
                <span id="submit-text">Select an answer</span>
                <span class="loading-spinner" id="loading-spinner" style="display: none;" aria-hidden="true"></span>
            </button>
            <div id="submit-help" class="sr-only">Press Enter or click to submit your selected answer</div>
        </div>

        <div class="result-container" id="result-container" role="alert" aria-live="assertive">
            <div class="result-icon" id="result-icon" aria-hidden="true">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="result-text" id="result-text">Great job!</div>
            <div class="result-explanation" id="result-explanation">
                You got the correct answer!
            </div>
        </div>
    </div>

    <!-- Confetti Animation (will be added via JS) -->
    <canvas id="confetti-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000;"></canvas>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // Quiz questions data - moved from PHP to JavaScript for Netlify compatibility
        const quizQuestions = [
            // Geography Questions
            {
                'question': 'What is the capital of France?',
                'answer': 'Paris',
                'options': ['London', 'Berlin', 'Paris', 'Madrid']
            },
            {
                'question': 'Which country has the most natural lakes?',
                'answer': 'Canada',
                'options': ['Russia', 'Canada', 'Finland', 'Sweden']
            },
            {
                'question': 'What is the smallest country in the world?',
                'answer': 'Vatican City',
                'options': ['Monaco', 'San Marino', 'Vatican City', 'Liechtenstein']
            },
            {
                'question': 'Which river is the longest in the world?',
                'answer': 'Nile River',
                'options': ['Amazon River', 'Nile River', 'Mississippi River', 'Yangtze River']
            },
            {
                'question': 'Mount Everest is located in which mountain range?',
                'answer': 'Himalayas',
                'options': ['Andes', 'Rocky Mountains', 'Alps', 'Himalayas']
            },

            // Science Questions
            {
                'question': 'Which planet is known as the Red Planet?',
                'answer': 'Mars',
                'options': ['Venus', 'Mars', 'Jupiter', 'Saturn']
            },
            {
                'question': 'What is the chemical symbol for gold?',
                'answer': 'Au',
                'options': ['Go', 'Gd', 'Au', 'Ag']
            },
            {
                'question': 'How many bones are there in an adult human body?',
                'answer': '206',
                'options': ['196', '206', '216', '226']
            },
            {
                'question': 'What gas makes up about 78% of Earth\'s atmosphere?',
                'answer': 'Nitrogen',
                'options': ['Oxygen', 'Carbon Dioxide', 'Nitrogen', 'Argon']
            },
            {
                'question': 'What is the speed of light in vacuum?',
                'answer': '299,792,458 m/s',
                'options': ['299,792,458 m/s', '300,000,000 m/s', '186,000 m/s', '150,000,000 m/s']
            },

            // Mathematics Questions
            {
                'question': 'What is 2 + 2?',
                'answer': '4',
                'options': ['3', '4', '5', '6']
            },
            {
                'question': 'What is the value of π (pi) to 2 decimal places?',
                'answer': '3.14',
                'options': ['3.12', '3.14', '3.16', '3.18']
            },
            {
                'question': 'What is 15% of 200?',
                'answer': '30',
                'options': ['25', '30', '35', '40']
            },
            {
                'question': 'What is the square root of 144?',
                'answer': '12',
                'options': ['10', '11', '12', '13']
            },
            {
                'question': 'In a right triangle, what is the longest side called?',
                'answer': 'Hypotenuse',
                'options': ['Adjacent', 'Opposite', 'Hypotenuse', 'Base']
            },

            // History Questions
            {
                'question': 'In which year did World War II end?',
                'answer': '1945',
                'options': ['1944', '1945', '1946', '1947']
            },
            {
                'question': 'Who was the first person to walk on the moon?',
                'answer': 'Neil Armstrong',
                'options': ['Buzz Aldrin', 'Neil Armstrong', 'John Glenn', 'Alan Shepard']
            },
            {
                'question': 'The ancient city of Troy was located in which modern-day country?',
                'answer': 'Turkey',
                'options': ['Greece', 'Italy', 'Turkey', 'Egypt']
            },
            {
                'question': 'Which empire was ruled by Julius Caesar?',
                'answer': 'Roman Empire',
                'options': ['Greek Empire', 'Roman Empire', 'Persian Empire', 'Egyptian Empire']
            },
            {
                'question': 'The Berlin Wall fell in which year?',
                'answer': '1989',
                'options': ['1987', '1988', '1989', '1990']
            },

            // Art & Literature Questions
            {
                'question': 'Who painted the Mona Lisa?',
                'answer': 'Leonardo da Vinci',
                'options': ['Pablo Picasso', 'Vincent van Gogh', 'Leonardo da Vinci', 'Michelangelo']
            },
            {
                'question': 'Who wrote the novel "1984"?',
                'answer': 'George Orwell',
                'options': ['Aldous Huxley', 'George Orwell', 'Ray Bradbury', 'H.G. Wells']
            },
            {
                'question': 'Which artist cut off his own ear?',
                'answer': 'Vincent van Gogh',
                'options': ['Pablo Picasso', 'Vincent van Gogh', 'Claude Monet', 'Salvador Dalí']
            },
            {
                'question': 'Who composed "The Four Seasons"?',
                'answer': 'Antonio Vivaldi',
                'options': ['Johann Bach', 'Wolfgang Mozart', 'Antonio Vivaldi', 'Ludwig Beethoven']
            },
            {
                'question': 'Which Shakespeare play features the characters Romeo and Juliet?',
                'answer': 'Romeo and Juliet',
                'options': ['Hamlet', 'Macbeth', 'Romeo and Juliet', 'Othello']
            },

            // Technology & Programming Questions
            {
                'question': 'Which programming language is known as the "language of the web"?',
                'answer': 'JavaScript',
                'options': ['Python', 'Java', 'JavaScript', 'C++']
            },
            {
                'question': 'What does "HTML" stand for?',
                'answer': 'HyperText Markup Language',
                'options': ['High Tech Modern Language', 'HyperText Markup Language', 'Home Tool Markup Language', 'Hyperlink and Text Markup Language']
            },
            {
                'question': 'Who founded Microsoft?',
                'answer': 'Bill Gates',
                'options': ['Steve Jobs', 'Bill Gates', 'Mark Zuckerberg', 'Larry Page']
            },
            {
                'question': 'What does "AI" stand for in technology?',
                'answer': 'Artificial Intelligence',
                'options': ['Automated Intelligence', 'Artificial Intelligence', 'Advanced Intelligence', 'Algorithmic Intelligence']
            },
            {
                'question': 'Which company developed the iPhone?',
                'answer': 'Apple',
                'options': ['Samsung', 'Google', 'Apple', 'Microsoft']
            },

            // Sports Questions
            {
                'question': 'How many players are on a basketball team on the court at one time?',
                'answer': '5',
                'options': ['4', '5', '6', '7']
            },
            {
                'question': 'In which sport would you perform a slam dunk?',
                'answer': 'Basketball',
                'options': ['Volleyball', 'Basketball', 'Tennis', 'Baseball']
            },
            {
                'question': 'How often are the Summer Olympic Games held?',
                'answer': 'Every 4 years',
                'options': ['Every 2 years', 'Every 3 years', 'Every 4 years', 'Every 5 years']
            },
            {
                'question': 'Which country has won the most FIFA World Cups?',
                'answer': 'Brazil',
                'options': ['Germany', 'Argentina', 'Brazil', 'Italy']
            },
            {
                'question': 'In golf, what is the term for one stroke under par?',
                'answer': 'Birdie',
                'options': ['Eagle', 'Birdie', 'Bogey', 'Albatross']
            },

            // Nature & Animals Questions
            {
                'question': 'What is the largest ocean on Earth?',
                'answer': 'Pacific Ocean',
                'options': ['Atlantic Ocean', 'Indian Ocean', 'Arctic Ocean', 'Pacific Ocean']
            },
            {
                'question': 'Which animal is known as the "King of the Jungle"?',
                'answer': 'Lion',
                'options': ['Tiger', 'Lion', 'Elephant', 'Leopard']
            },
            {
                'question': 'How many hearts does an octopus have?',
                'answer': '3',
                'options': ['1', '2', '3', '4']
            },
            {
                'question': 'Which bird is known for its ability to mimic human speech?',
                'answer': 'Parrot',
                'options': ['Crow', 'Parrot', 'Eagle', 'Owl']
            },
            {
                'question': 'What is the fastest land animal?',
                'answer': 'Cheetah',
                'options': ['Lion', 'Horse', 'Cheetah', 'Gazelle']
            },

            // Food & Culture Questions
            {
                'question': 'Which spice is derived from the Crocus flower?',
                'answer': 'Saffron',
                'options': ['Turmeric', 'Saffron', 'Paprika', 'Cinnamon']
            },
            {
                'question': 'What is the main ingredient in guacamole?',
                'answer': 'Avocado',
                'options': ['Tomato', 'Avocado', 'Lime', 'Onion']
            },
            {
                'question': 'Which country is famous for inventing pizza?',
                'answer': 'Italy',
                'options': ['France', 'Italy', 'Greece', 'Spain']
            },
            {
                'question': 'What type of pastry is used to make profiteroles?',
                'answer': 'Choux pastry',
                'options': ['Puff pastry', 'Shortcrust pastry', 'Choux pastry', 'Filo pastry']
            },
            {
                'question': 'Which tea is known for its distinctive smoky flavor?',
                'answer': 'Lapsang Souchong',
                'options': ['Earl Grey', 'English Breakfast', 'Lapsang Souchong', 'Darjeeling']
            }
        ];

        // Simple Quiz Application
        let currentQuestion = null;
        let selectedOption = null;

        function loadQuestion() {
            console.log('Loading question...');

            // Show loading state
            $('#question').text('Loading question...');
            $('#options-container').empty();
            $('#submit-btn').prop('disabled', true).find('#submit-text').text('Loading...');

            // Use local question data instead of AJAX call
            try {
                const questionData = getRandomQuestion();
                displayQuestion(questionData);
            } catch (error) {
                console.error('Error loading question:', error);
                
                $('#question').html(`
                    <div style="text-align: center; color: #ef4444;">
                        <i class="fas fa-exclamation-triangle"></i><br>
                        Failed to load question: ${error.message}<br>
                    </div>
                `);

                $('#options-container').html(`
                    <div style="text-align: center; padding: 20px;">
                        <button onclick="location.reload()" class="submit-btn" style="width: auto; margin: 0;">
                            <i class="fas fa-refresh"></i> Try Again
                        </button>
                    </div>
                `);
            }
        }

        function getRandomQuestion() {
            const randomIndex = Math.floor(Math.random() * quizQuestions.length);
            const selectedQuestion = quizQuestions[randomIndex];
            
            // Format the response to match the expected structure from PHP
            return {
                'success': true,
                'question': {
                    'id': randomIndex + 1,
                    'question': selectedQuestion.question.trim(),
                    'answer_type': 'text',
                    'answer': selectedQuestion.answer.trim()
                },
                'options': selectedQuestion.options.map((option, index) => ({
                    'id': index + 1,
                    'option_type': 'text',
                    'option_content': option.trim()
                })),
                'metadata': {
                    'total_options': selectedQuestion.options.length,
                    'fetched_at': new Date().toISOString(),
                    'question_id': randomIndex + 1,
                    'source': 'local_questions'
                }
            };
        }

        function displayQuestion(data) {
            currentQuestion = data;

            // Display question
            $('#question').text(data.question.question);

            // Display options
            const optionsContainer = $('#options-container');
            optionsContainer.empty();

            data.options.forEach((option, index) => {
                const optionHtml = `
                    <div class="option" data-value="${option.option_content}" tabindex="0">
                        <div class="option-content">
                            <div class="option-indicator"></div>
                            <span class="option-text">${option.option_content}</span>
                        </div>
                    </div>
                `;
                optionsContainer.append(optionHtml);
            });

            // Reset selection
            selectedOption = null;
            $('#submit-btn').prop('disabled', true).find('#submit-text').text('Select an answer');
        }

        function selectOption($option) {
            // Remove previous selection
            $('.option').removeClass('selected');

            // Add selection to clicked option
            $option.addClass('selected');

            // Update selected option value
            selectedOption = $option.data('value');

            // Enable submit button
            $('#submit-btn').prop('disabled', false).find('#submit-text').text('Submit Answer');
        }

        function submitAnswer() {
            if (!selectedOption) return;

            // Trim both values and compare (case-sensitive)
            const userAnswer = selectedOption.trim();
            const correctAnswer = currentQuestion.question.answer.trim();
            const isCorrect = userAnswer === correctAnswer;

            // Debug logging (remove in production)
            if (window.location.hostname === 'localhost') {
                console.log('Answer Comparison:', {
                    userAnswer: userAnswer,
                    correctAnswer: correctAnswer,
                    isCorrect: isCorrect
                });
            }

            // Show result
            showResult(isCorrect);

            // Trigger confetti for correct answers
            if (isCorrect && typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#667eea', '#764ba2', '#f093fb', '#f5576c']
                });
            }
        }

        function showResult(isCorrect) {
            const resultContainer = $('#result-container');
            const resultIcon = $('#result-icon');
            const resultText = $('#result-text');
            const resultExplanation = $('#result-explanation');

            // Hide question container
            $('#question-container').fadeOut(400);

            // Configure result display
            if (isCorrect) {
                resultIcon.html('<i class="fas fa-check-circle"></i>').removeClass('incorrect').addClass('correct');
                resultText.text('Excellent!').removeClass('incorrect').addClass('correct');
                resultExplanation.html(`
                    <strong>Correct!</strong><br>
                    The answer is: <em>${currentQuestion.question.answer}</em>
                `);
            } else {
                resultIcon.html('<i class="fas fa-times-circle"></i>').removeClass('correct').addClass('incorrect');
                resultText.text('Not quite right').removeClass('correct').addClass('incorrect');
                resultExplanation.html(`
                    <strong>The correct answer is:</strong><br>
                    <em>${currentQuestion.question.answer}</em><br>
                    <small>You selected: ${selectedOption}</small>
                `);
            }

            // Show result with animation
            setTimeout(() => {
                resultContainer.fadeIn(600);
            }, 500);

            // Auto-hide result and load new question after 4 seconds
            setTimeout(() => {
                resultContainer.fadeOut(400);
                $('#question-container').fadeIn(600);
                loadQuestion();
            }, 4000);
        }

        // Event handlers
        $(document).on('click', '.option', function() {
            selectOption($(this));
        });

        $('#submit-btn').on('click', function() {
            submitAnswer();
        });

        // Keyboard support
        $(document).on('keydown', function(e) {
            if (e.key === 'Enter' && selectedOption) {
                submitAnswer();
            }
        });

        // Preloader functions
        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            preloader.classList.add('fade-out');
            setTimeout(() => {
                preloader.style.display = 'none';
            }, 500);
        }

        // Initialize quiz
        $(document).ready(function() {

            // Hide quiz container initially
            $('.quiz-container').hide();

            // Simulate loading time and hide preloader
            setTimeout(() => {
                hidePreloader();
                $('.quiz-container').fadeIn(800);
                loadQuestion();
            }, 2000); // Show preloader for 2 seconds
        });
    </script>
</body>
</html>

